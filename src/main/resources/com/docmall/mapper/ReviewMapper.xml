<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.docmall.mapper.ReviewMapper">

<insert id="review_insert" parameterType="com.docmall.domain.ReviewVO">
insert into 
REVIEW_TBL(rew_num, MBSP_ID, PRO_NUM, REW_CONTENT, REW_SCORE,REW_REGDATE)
 values
 (seq_review_tbl.nextval,#{mbsp_id},#{pro_num},#{rew_content},#{rew_score},sysdate)
</insert>

<select id="list" parameterType="map" resultType="com.docmall.domain.ReviewVO">
<![CDATA[
select rew_num, MBSP_ID, PRO_NUM, REW_CONTENT, REW_SCORE,REW_REGDATE
from (
        select /*+ index_desc(REVIEW_TBL PK_REVIEW_TBL) */ rownum rn,rew_num, MBSP_ID, PRO_NUM, REW_CONTENT, REW_SCORE,REW_REGDATE
from REVIEW_TBL
where


PRO_NUM =#{pro_num}
and
 rownum<=#{cri.pageNum} * #{cri.amount}
 
)
where rn>(#{cri.pageNum}-1) * #{cri.amount}
]]>

</select>


<select id="listCount" parameterType="Integer" resultType="int">

select count(*) from REVIEW_TBL where pro_num =#{pro_num}


</select>



</mapper>